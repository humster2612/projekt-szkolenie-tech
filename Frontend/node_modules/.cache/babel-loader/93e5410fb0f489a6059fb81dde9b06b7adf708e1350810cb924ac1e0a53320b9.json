{"ast":null,"code":"import { authAPI } from \"../assets/images/api/api\";\nconst SET_USER_DATA = 'SET_USER_DATA';\nlet initialState = {\n  userId: null,\n  email: null,\n  login: null,\n  isAuth: false,\n  error: null\n};\nconst authReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_USER_DATA:\n      return {\n        ...state,\n        ...action.payload,\n        isAuth: true,\n        error: null\n      };\n    default:\n      return state;\n  }\n};\nexport const setAuthUserData = (userId, email, login, isAuth) => ({\n  type: SET_USER_DATA,\n  payload: {\n    userId,\n    email,\n    login,\n    isAuth\n  }\n});\nexport const login = (email, password) => async dispatch => {\n  try {\n    let response = await authAPI.login(email, password);\n    if (response && response.data) {\n      const {\n        userId\n      } = response.data;\n      dispatch(setAuthUserData(userId, email, email, true));\n    } else {\n      // Обработка сценария, когда response.data не определен\n      dispatch({\n        type: 'LOGIN_ERROR',\n        error: 'Ошибка: данные пользователя не получены'\n      });\n    }\n  } catch (error) {\n    var _error$response, _error$response$data;\n    dispatch({\n      type: 'LOGIN_ERROR',\n      error: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Произошла ошибка при входе пользователя'\n    });\n  }\n};\nexport const register = (username, email, password) => async dispatch => {\n  try {\n    let response = await authAPI.register(username, email, password);\n    if (response && response.data) {\n      const {\n        userId\n      } = response.data;\n      dispatch(setAuthUserData(userId, email, email, true));\n    } else {\n      // Обработка сценария, когда response.data не определен\n      dispatch({\n        type: 'REGISTER_ERROR',\n        error: 'Ошибка: данные пользователя не получены'\n      });\n    }\n  } catch (error) {\n    var _error$response2, _error$response2$data;\n    dispatch({\n      type: 'REGISTER_ERROR',\n      error: ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Произошла ошибка при регистрации пользователя'\n    });\n  }\n};\nexport default authReducer;","map":{"version":3,"names":["authAPI","SET_USER_DATA","initialState","userId","email","login","isAuth","error","authReducer","state","action","type","payload","setAuthUserData","password","dispatch","response","data","_error$response","_error$response$data","message","register","username","_error$response2","_error$response2$data"],"sources":["/Users/victoriapolovyy/Desktop/projekt-szkolenie-tech/Frontend/src/redux/auth-reducer.ts"],"sourcesContent":["import { authAPI } from \"../assets/images/api/api\";\nconst SET_USER_DATA = 'SET_USER_DATA';\n\nexport type InitialStateType = {\n    userId: number | null,\n    email: string | null,\n    login: string | null,\n    isAuth: boolean,\n    error: string | null\n};\n\nlet initialState: InitialStateType = {\n    userId: null,\n    email: null,\n    login: null,\n    isAuth: false,\n    error: null\n};\n\nconst authReducer = (state = initialState, action: any): InitialStateType => {\n    switch (action.type) {\n        case SET_USER_DATA:\n            return {\n                ...state,\n                ...action.payload,\n                isAuth: true,\n                error: null\n            };\n        default:\n            return state;\n    }\n};\n\ntype SetAuthUsersDataActionPayloadType = {\n    userId: number | null,\n    email: string | null,\n    login: string | null,\n    isAuth: boolean\n};\n\ntype SetAuthUsersDataActionType = {\n    type: typeof SET_USER_DATA,\n    payload: SetAuthUsersDataActionPayloadType\n};\n\nexport const setAuthUserData = (userId: number | null, email: string | null, login: string | null, isAuth: boolean): SetAuthUsersDataActionType => ({\n    type: SET_USER_DATA,\n    payload: { userId, email, login, isAuth }\n});\nexport const login = (email: string, password: string) => async (dispatch: any) => {\n    try {\n        let response = await authAPI.login(email, password);\n        if (response && response.data) {\n            const { userId } = response.data;\n            dispatch(setAuthUserData(userId, email, email, true));\n        } else {\n            // Обработка сценария, когда response.data не определен\n            dispatch({ type: 'LOGIN_ERROR', error: 'Ошибка: данные пользователя не получены' });\n        }\n    } catch (error) {\n        dispatch({ type: 'LOGIN_ERROR', error: error.response?.data?.message || 'Произошла ошибка при входе пользователя' });\n    }\n};\n\nexport const register = (username: string, email: string, password: string) => async (dispatch: any) => {\n    try {\n        let response = await authAPI.register(username, email, password);\n        if (response && response.data) {\n            const { userId } = response.data;\n            dispatch(setAuthUserData(userId, email, email, true));\n        } else {\n            // Обработка сценария, когда response.data не определен\n            dispatch({ type: 'REGISTER_ERROR', error: 'Ошибка: данные пользователя не получены' });\n        }\n    } catch (error) {\n        dispatch({ type: 'REGISTER_ERROR', error: error.response?.data?.message || 'Произошла ошибка при регистрации пользователя' });\n    }\n};\n\nexport default authReducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}